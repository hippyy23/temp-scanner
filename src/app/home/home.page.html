<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      BLE Temp Scanner
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">BLE Temp Scanner</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="ion-padding">
    @if (!isScanning) {
      <ion-button expand="block" (click)="scan()">
        <ion-icon slot="start" name="bluetooth-outline" />
        Start scan
      </ion-button>  
    } @else {
      <ion-button expand="block" (click)="scan()">
        <ion-icon slot="start" name="stop" />
        Stop scan
      </ion-button>  
    }
    
  </div>

  @if ((ble.devices$ | async); as devices) {
    <ion-list>
      @if (devices.length === 0) {
        <ion-item lines="none">
          <ion-label class="ion-text-center">No sensors found...</ion-label>
        </ion-item>
      }
      
      @for (device of devices; track device.id) {
        <ion-item class="device-card">
          <ion-icon slot="start" name="thermometer-outline" color="tertiary" />
          <ion-label>
            <h2>Sensor ID: {{ device.id }}</h2>
            <p>Name: {{ device.name }} || RSSI: {{ device.rssi }}</p>
          </ion-label>
          <div slot="end" class="temperature-reading">
            {{ device.temperature }} Â°C
          </div>
        </ion-item>
      }
      
    </ion-list>
  }
  
</ion-content>
